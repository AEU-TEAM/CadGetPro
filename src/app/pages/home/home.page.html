<ion-header class="ion-no-border">
  <ion-toolbar class="app-toolbar">

    <!-- Profile -->
    <ion-buttons slot="start">
      <ion-button fill="clear" class="profile-btn" id="profile-trigger">
        <ion-avatar class="avatar">
          <img src="https://i.pravatar.cc/150?u=user" alt="Profile" />
        </ion-avatar>
      </ion-button>
    </ion-buttons>

    <ion-popover trigger="profile-trigger" trigger-action="click" side="bottom" alignment="start"
      class="profile-popover">
      <ng-template>
        <ion-list class="profile-menu" lines="none">
          <ion-item button (click)="goToProfile()">
            <ion-icon name="person-outline" slot="start"></ion-icon>
            <ion-label>Profile</ion-label>
          </ion-item>
          <ion-item button (click)="goToOrders()">
            <ion-icon name="receipt-outline" slot="start"></ion-icon>
            <ion-label>Order Histories</ion-label>
          </ion-item>
          <ion-item lines="full" class="divider"></ion-item>
          <ion-item button class="logout" (click)="logout()">
            <ion-icon name="log-out-outline" slot="start"></ion-icon>
            <ion-label>Logout</ion-label>
          </ion-item>
        </ion-list>
      </ng-template>
    </ion-popover>

    <!-- Brand -->
    <ion-title class="app-title">
      <span class="brand-strong">Gadget<b>Pro</b></span>
    </ion-title>

    <!-- Notifications -->
    <ion-buttons slot="end">
      <ion-button fill="clear" class="notification-btn">
        <ion-icon name="notifications-outline"></ion-icon>
        <ion-badge class="notification-badge">4</ion-badge>
      </ion-button>
    </ion-buttons>

  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Search -->
  <div class="search-section">
    <ion-searchbar placeholder="Search gadgets..." mode="ios" class="custom-search"></ion-searchbar>
  </div>

  <!-- Auto-swapping Promo Slider -->
  <div class="promo-section">
    <swiper-container [loop]="true" [pagination]="true" class="promo-slider">
      <swiper-slide *ngFor="let slide of promoSlides">
        <div class="slide-card">
          <div class="slide-content">
            <span class="badge">{{ slide.badge }}</span>
            <h2>{{ slide.title }} <br><b>{{ slide.subtitle }}</b></h2>
            <button class="cta-btn">{{ slide.ctaText }}</button>
          </div>
          <div class="slide-image">
            <img [src]="slide.image" />
          </div>
        </div>
      </swiper-slide>
    </swiper-container>
  </div>

  <!-- Categories -->
  <div class="section-label">
    <h3>Explore Categories</h3>
  </div>
  <div class="category-scroll">
    <div class="category-pill" *ngFor="let cat of categories" [class.active]="cat.active" (click)="selectCategory(cat)">
      <ion-icon [name]="cat.icon"></ion-icon>
      <span>{{ cat.name }}</span>
    </div>
  </div>

  <!-- Popular Products -->
  <div class="section-label">
    <h3>Popular Products</h3>
  </div>
  <ion-grid class="product-grid">
    <ion-row>
      <ion-col size="6" *ngFor="let p of popularProducts">
        <div class="pro-card">
          <div class="wishlist-btn"><ion-icon name="heart-outline"></ion-icon></div>
          <div class="img-wrapper"><img [src]="p.thumbnail" /></div>
          <div class="info-wrapper">
            <h4 class="product-name">{{ p.title }}</h4>
            <div class="price-row">
              <span class="current-price">${{ p.variants[0].prices[0].amount }}</span>
              <ion-icon name="add-circle" color="primary"></ion-icon>
            </div>
          </div>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- Best Selling -->
  <div class="section-label">
    <h3>Best Selling</h3>
    <a class="see-all">View All</a>
  </div>
  <div class="best-selling-container">
    <div class="best-card" *ngFor="let b of bestSellers">
      <div class="best-img-box"><img [src]="b.thumbnail" alt="product" /></div>
      <div class="best-info">
        <h4>{{ b.title }}</h4>
        <div class="best-footer">
          <span class="price">${{ b.variants[0].prices[0].amount }}</span>
          <div class="rating">
            <ion-icon name="star" color="warning"></ion-icon>
            <span>4.8</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</ion-content>
